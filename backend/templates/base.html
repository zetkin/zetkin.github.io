{% load cms_tags i18n menu_tags sekizai_tags static %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="{% page_attribute 'meta_description' %}">
    <title>{% page_attribute "page_title" %}</title>
    {% render_block "css" %}
    <link rel="stylesheet" type="text/css" href="{% static "/main.css" %}">
    {% if request.toolbar.edit_mode_active %}
    <style>
      .cms-tooltip {
        pointer-events: none;
      }
    </style>
    {% endif %}
  </head>

  <body class="{% block bodyclasses %}{% endblock %}">
    {% cms_toolbar %}

    <div class="navbar" role="navigation">
      <div class="navbar__logo navbar__divider">
        <a href="/" class="navbar__link">
          <img src="{% static "images/zetkin-logo@2x.png" %}" alt="Zetkin logo">
        </a>
      </div>
      <button class="button button--bare navbar__trigger">{% trans "Menu" %}</button>
      <div class="navbar__collapse">
        <button class="button button--bare navbar__close">{% trans "Close" %}</button>
        <ul class="navbar__menu mainnav">
        {% static_placeholder "navigation" %}
        </ul>
        <ul class="navbar__menu">
          <li class="dropdown navbar__dropdown navbar__lang">
            {% get_language_info for LANGUAGE_CODE as lang %}
            <a href="#" class="navbar__link navbar__link--muted u-caret">{% trans "Language" %}: {{ lang.name_local }}</a>
            <ul class="dropdown__menu">
              {% language_chooser %}
            </ul>
          </li>
          <li>
            <a href="https://www.zetk.in/dashboard" class="button navbar__button u-pointer">{% trans "Log in" %}</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main" role="main">
      {% block content%}
      {% endblock %}
    </div>
    <div class="footer u-margin-top-huge">
      <div class="container">
        <div class="footer__logo">
          <img src="{% static "images/zf-logo@2x.png" %}" alt="Zetkin logo">
        </div>
        <div class="footer__body">
          <ul class="list" role="navigation">
            {% show_menu 1 2 1 2 %}
          </ul>
          <div class="footer__misc">
            <span>Zetkin Foundation</span>
            <a href="mailto:info@zetkin.org">info@zetkin.org</a>
            <a href="https://facebook.com/ZetkinFoundation">Facebook</a>
          </div>
        </div>
      </div>
    </div>

    {% render_block "js" %}
    <script src="https://use.typekit.net/tqq3ylv.js"></script>
    <script>try{Typekit.load({ async: true });}catch(e){}</script>
    <script>
      // Click "menu" button to open main nav
      document.querySelector('.navbar__trigger').addEventListener('click', () => {
        document.querySelector('.navbar__collapse').classList.add('is-open');
      });

      // Click "close" button to close main nav
      document.querySelector('.navbar__close').addEventListener('click', () => {
        document.querySelector('.navbar__collapse').classList.remove('is-open');
        document.querySelectorAll('li.dropdown').forEach(elem => {
          elem.classList.remove('is-open');
        });
      });

      // Click any sub-menu to expand
      document.querySelectorAll('li.dropdown').forEach(elem => {
        elem.querySelector('.navbar__link').addEventListener('click', ev => {
          elem.classList.toggle('is-open');
          ev.preventDefault();
        });
      });
    </script>
  </body>
</html>
